<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">

	<context:annotation-config/>
	<context:property-placeholder ignore-unresolvable="true" null-value="" />
	
	<bean id="application" class="org.interledger.ilp.ledger.client.Application">
	</bean>

	<!--  Load the REST adaptor -->
	<bean id="restLedgerAdaptor" class="org.interledger.ilp.ledger.adaptor.rest.RestLedgerAdaptor">
    	<constructor-arg name="ledgerBaseUrl" value="${ledger.rest.url}"/>
    	<property name="accountAuthToken" ref="restCredentials"/>
    	<property name="eventHandler" ref="restEventHandler"/>
	</bean>	
	
	<!-- Setup REST calls to use BasicAuth -->
	<bean id="restCredentials" class="org.springframework.security.authentication.UsernamePasswordAuthenticationToken">
    	<constructor-arg name="principal" value="${ledger.rest.username}"/>
    	<constructor-arg name="credentials" value="${ledger.rest.password}"/>
	</bean>

	<!-- Publish events via the ApplicationContext event publisher  -->
	<bean id="restEventHandler" class="org.interledger.ilp.ledger.client.events.ApplicationEventPublishingLedgerEventHandler">
	</bean>

</beans>